<include file="Public:nav" />
		<div class="login">
			<form action="" method="post" class="loginForm">
				<div class="container">
					<div class="login_bar">
						<div class="title">
							<h2>会员登录</h2>
							<span>Member Login</span>
						</div>
						<div class="inputs">
							<p>
								<label for="username">用户名：</label>
								<input type="text" name="name" id="username" value="">
							</p>
							<p class="error">
								<!-- <i class="icon-error"></i>
								<span>用户名错误</span> -->
							</p>
							<p>
								<label for="password">密　码：</label>
								<input type="text" name="pass" id="password" value="">
							</p>
							<p class="error">
								<!-- <i class="icon-error"></i>
								<span>密码错误</span> -->
							</p>
							<p>
								<label for="verify">验证码：</label>
								<input type="text" class="code" size="4" name="verify" id="code" value="">
								<img id="userVerify" src="{:U('User/verify')}" class="code_img" width="130px" height="40px">
							</p>
							<p class="error">
								<!-- <i class="icon-error"></i>
								<span>验证码错误</span> -->
							</p>
							<p class="redpass">
								<input type="checkbox">
								<span class="middle">记住密码</span>
								<a href="" class="middle color-error">密码找回</a>
							</p>
						</div>
						<div class="submit">
							<p>
								<input class="login_btn" type="submit" value="登录">
							</p>
							<p class="register">
								你还没有注册创客的会员？ <a class="color-error" href="">立即注册</a>
							</p>
						</div>
					</div>
				</div>
			</form>
		</div>
<include file="Public:footer" />
<script type="text/javascript" src="__PUBLIC__/js/layer/layer.js" ></script>
<script type="text/javascript">
	$(function(){
		$('.code_img').on('click',function(){
            var url = "{:U('User/verify')}";
            $(this)[0].src= url;
        });
        //登录
        $(function(){
        	$('.login_btn').on('click',function(){
        		//登录
	            if($('#username').val().trim() == ""){
	                layer.tips('用户名不能为空哦!', '#username',{tips: [4, '#FF5722']});
	                $('#username').focus();
	                return false;
	            }
	            if($('#password').val().trim() == ""){
	                layer.tips('你还没有输入密码呢!', '#password',{tips: [4, '#FF5722']});
	                $('#password').focus();
	                return false;
	            }
	            if($('#code').val().trim() == ""){
	                layer.tips('你还没有输入验证码呢!', '#code',{tips: [4, '#FF5722']});
	                $('#code').focus();
	                return false;
	            }
	            if($('#code').val().trim().length != 4){
	               layer.tips('验证码长度为4!', '#code',{tips: [4, '#FF5722']}); 
	               $('#code').focus();
	               return false;
	            }
        		$.ajax({
        			url:'{:U("User/login")}',
        			type: 'post',
        			dataType: 'json',
        			data: $('.loginForm').serialize(),
        			success: function(res){
        				if(res.status == 1){
        					layer.msg(res.msg,{icon:1});
        				}else{
        					layer.msg(res.msg,{icon:2});
        				}
        			},
        			error: function(res){
        				console.log('error');
        				layer.msg('出现错误!',{icon:2});
        			}
        		});
        		return false;
        	});
        });
	});
</script>
